%%inherit(file="/_main.haml")
%%namespace(name='utils', file='/_utils.haml')
%%namespace(name='page_utils', file='./_utils.haml')

@breadcrumb
    %li
        &= page.title if page else name
        ##- if not page.is_public:
        ##    %span.glyphicon.glyphicon-eye-close

+page_utils.nav(name)

%h1 History of "${name}"


- if page and page.versions:
    - versions = list(reversed(page.versions))
    %ul - for i, version in enumerate(versions):
        %li
            %a(href=url_for('page', name=name, version_id=version.id))
                %strong
                    ${version.created_at.strftime('%b %d, %Y at %H:%M %p')}
                by
                %em
                    ${version.creator.display_name|h}
                    %small (${version.creator.name|h})
            - if i < len(versions) - 1:
                ::
                %a(href=url_for('page', name=name, action='diff', version_id=version.id, diff_from_id=versions[i + 1].id))
                    Changes.

- else:
    %em This page has no content.
